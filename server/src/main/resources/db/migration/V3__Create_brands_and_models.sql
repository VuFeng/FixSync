-- Create brands table
CREATE TABLE IF NOT EXISTS brands (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL UNIQUE,
    logo_url VARCHAR(500),
    is_active BOOLEAN NOT NULL DEFAULT TRUE,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    version BIGINT NOT NULL DEFAULT 0
);

CREATE INDEX idx_brands_name ON brands(name);
CREATE INDEX idx_brands_is_active ON brands(is_active);

-- Create device_models table
CREATE TABLE IF NOT EXISTS device_models (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    brand_id UUID NOT NULL,
    name VARCHAR(100) NOT NULL,
    device_type VARCHAR(100) NOT NULL, -- Tên hãng: Apple, Samsung, Xiaomi, etc.
    is_active BOOLEAN NOT NULL DEFAULT TRUE,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    version BIGINT NOT NULL DEFAULT 0,
    CONSTRAINT fk_device_models_brand FOREIGN KEY (brand_id) REFERENCES brands(id) ON DELETE RESTRICT,
    CONSTRAINT uk_device_models_brand_name UNIQUE (brand_id, name)
);

CREATE INDEX idx_device_models_brand_id ON device_models(brand_id);
CREATE INDEX idx_device_models_name ON device_models(name);
CREATE INDEX idx_device_models_device_type ON device_models(device_type);
CREATE INDEX idx_device_models_is_active ON device_models(is_active);

-- Insert popular brands
INSERT INTO brands (id, name, is_active) VALUES
    ('00000000-0000-0000-0001-000000000001'::UUID, 'Apple', TRUE),
    ('00000000-0000-0000-0001-000000000002'::UUID, 'Samsung', TRUE),
    ('00000000-0000-0000-0001-000000000003'::UUID, 'Xiaomi', TRUE),
    ('00000000-0000-0000-0001-000000000004'::UUID, 'OPPO', TRUE),
    ('00000000-0000-0000-0001-000000000005'::UUID, 'Vivo', TRUE),
    ('00000000-0000-0000-0001-000000000006'::UUID, 'Realme', TRUE),
    ('00000000-0000-0000-0001-000000000007'::UUID, 'Huawei', TRUE),
    ('00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus', TRUE),
    ('00000000-0000-0000-0001-000000000009'::UUID, 'Nokia', TRUE),
    ('00000000-0000-0000-0001-000000000010'::UUID, 'Sony', TRUE),
    ('00000000-0000-0000-0001-000000000011'::UUID, 'Motorola', TRUE),
    ('00000000-0000-0000-0001-000000000012'::UUID, 'Asus', TRUE),
    ('00000000-0000-0000-0001-000000000013'::UUID, 'Google', TRUE),
    ('00000000-0000-0000-0001-000000000014'::UUID, 'Honor', TRUE),
    ('00000000-0000-0000-0001-000000000015'::UUID, 'Tecno', TRUE),
    ('00000000-0000-0000-0001-000000000016'::UUID, 'Infinix', TRUE),
    ('00000000-0000-0000-0001-000000000017'::UUID, 'Itel', TRUE)
ON CONFLICT (name) DO NOTHING;

-- Insert popular Apple models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000001'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 15 Pro Max', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000002'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 15 Pro', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000003'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 15 Plus', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000004'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 15', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000005'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 14 Pro Max', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000006'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 14 Pro', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000007'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 14 Plus', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000008'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 14', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000009'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 13 Pro Max', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000010'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 13 Pro', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000011'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 13 mini', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000012'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 13', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000013'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 12 Pro Max', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000014'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 12 Pro', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000015'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 12 mini', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000016'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 12', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000017'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 11 Pro Max', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000018'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 11 Pro', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000019'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 11', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000020'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone XS Max', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000021'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone XS', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000022'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone XR', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000023'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone X', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000024'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 8 Plus', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000025'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone 8', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000026'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone SE (2022)', 'Apple', TRUE),
    ('00000000-0000-0000-0002-000000000027'::UUID, '00000000-0000-0000-0001-000000000001'::UUID, 'iPhone SE (2020)', 'Apple', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Samsung models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000101'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S24 Ultra', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000102'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S24+', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000103'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S24', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000104'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S23 Ultra', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000105'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S23+', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000106'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S23', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000107'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S22 Ultra', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000108'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S22+', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000109'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy S22', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000110'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy Note 20 Ultra', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000111'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy Note 20', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000112'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy Z Fold 5', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000113'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy Z Fold 4', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000114'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy Z Flip 5', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000115'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy Z Flip 4', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000116'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy A54', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000117'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy A34', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000118'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy A24', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000119'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy A14', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000120'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy A73', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000121'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy A53', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000122'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy M54', 'Samsung', TRUE),
    ('00000000-0000-0000-0002-000000000123'::UUID, '00000000-0000-0000-0001-000000000002'::UUID, 'Galaxy M34', 'Samsung', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Xiaomi models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000201'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Xiaomi 14 Pro', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000202'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Xiaomi 14', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000203'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Xiaomi 13 Pro', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000204'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Xiaomi 13', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000205'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Xiaomi 13T Pro', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000206'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Xiaomi 13T', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000207'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Redmi Note 13 Pro', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000208'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Redmi Note 13', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000209'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Redmi Note 12 Pro', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000210'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Redmi Note 12', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000211'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Redmi Note 11', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000212'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Redmi 13C', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000213'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Redmi 12', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000214'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'Redmi 11', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000215'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'POCO X6 Pro', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000216'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'POCO X6', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000217'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'POCO F5', 'Xiaomi', TRUE),
    ('00000000-0000-0000-0002-000000000218'::UUID, '00000000-0000-0000-0001-000000000003'::UUID, 'POCO M6', 'Xiaomi', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular OPPO models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000301'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Find X7 Ultra', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000302'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Find X6 Pro', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000303'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Find X5 Pro', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000304'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Reno 11 Pro', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000305'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Reno 11', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000306'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Reno 10 Pro', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000307'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Reno 10', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000308'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Reno 9 Pro', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000309'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'Reno 9', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000310'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'A98', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000311'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'A78', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000312'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'A58', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000313'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'A38', 'OPPO', TRUE),
    ('00000000-0000-0000-0002-000000000314'::UUID, '00000000-0000-0000-0001-000000000004'::UUID, 'A18', 'OPPO', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Vivo models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000401'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'X100 Pro', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000402'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'X100', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000403'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'X90 Pro', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000404'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'X90', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000405'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'V30 Pro', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000406'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'V30', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000407'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'V29', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000408'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'V27', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000409'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'Y36', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000410'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'Y27', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000411'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'Y17', 'Vivo', TRUE),
    ('00000000-0000-0000-0002-000000000412'::UUID, '00000000-0000-0000-0001-000000000005'::UUID, 'Y16', 'Vivo', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Realme models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000501'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, 'GT 5 Pro', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000502'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, 'GT 5', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000503'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, 'GT Neo 6', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000504'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, 'GT Neo 5', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000505'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, '12 Pro+', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000506'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, '12 Pro', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000507'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, '12', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000508'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, '11 Pro+', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000509'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, '11 Pro', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000510'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, '11', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000511'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, 'C67', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000512'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, 'C55', 'Realme', TRUE),
    ('00000000-0000-0000-0002-000000000513'::UUID, '00000000-0000-0000-0001-000000000006'::UUID, 'C53', 'Realme', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Huawei models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000601'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'Mate 60 Pro', 'Huawei', TRUE),
    ('00000000-0000-0000-0002-000000000602'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'Mate 60', 'Huawei', TRUE),
    ('00000000-0000-0000-0002-000000000603'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'Mate 50 Pro', 'Huawei', TRUE),
    ('00000000-0000-0000-0002-000000000604'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'P60 Pro', 'Huawei', TRUE),
    ('00000000-0000-0000-0002-000000000605'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'P60', 'Huawei', TRUE),
    ('00000000-0000-0000-0002-000000000606'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'P50 Pro', 'Huawei', TRUE),
    ('00000000-0000-0000-0002-000000000607'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'Nova 12', 'Huawei', TRUE),
    ('00000000-0000-0000-0002-000000000608'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'Nova 11', 'Huawei', TRUE),
    ('00000000-0000-0000-0002-000000000609'::UUID, '00000000-0000-0000-0001-000000000007'::UUID, 'Nova 10', 'Huawei', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular OnePlus models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000701'::UUID, '00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus 12', 'OnePlus', TRUE),
    ('00000000-0000-0000-0002-000000000702'::UUID, '00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus 11', 'OnePlus', TRUE),
    ('00000000-0000-0000-0002-000000000703'::UUID, '00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus 10 Pro', 'OnePlus', TRUE),
    ('00000000-0000-0000-0002-000000000704'::UUID, '00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus 10T', 'OnePlus', TRUE),
    ('00000000-0000-0000-0002-000000000705'::UUID, '00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus 9 Pro', 'OnePlus', TRUE),
    ('00000000-0000-0000-0002-000000000706'::UUID, '00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus 9', 'OnePlus', TRUE),
    ('00000000-0000-0000-0002-000000000707'::UUID, '00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus Nord 3', 'OnePlus', TRUE),
    ('00000000-0000-0000-0002-000000000708'::UUID, '00000000-0000-0000-0001-000000000008'::UUID, 'OnePlus Nord 2', 'OnePlus', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Nokia models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000801'::UUID, '00000000-0000-0000-0001-000000000009'::UUID, 'Nokia G60', 'Nokia', TRUE),
    ('00000000-0000-0000-0002-000000000802'::UUID, '00000000-0000-0000-0001-000000000009'::UUID, 'Nokia G42', 'Nokia', TRUE),
    ('00000000-0000-0000-0002-000000000803'::UUID, '00000000-0000-0000-0001-000000000009'::UUID, 'Nokia X30', 'Nokia', TRUE),
    ('00000000-0000-0000-0002-000000000804'::UUID, '00000000-0000-0000-0001-000000000009'::UUID, 'Nokia X20', 'Nokia', TRUE),
    ('00000000-0000-0000-0002-000000000805'::UUID, '00000000-0000-0000-0001-000000000009'::UUID, 'Nokia 8.3', 'Nokia', TRUE),
    ('00000000-0000-0000-0002-000000000806'::UUID, '00000000-0000-0000-0001-000000000009'::UUID, 'Nokia 7.2', 'Nokia', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Sony models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000000901'::UUID, '00000000-0000-0000-0001-000000000010'::UUID, 'Xperia 1 V', 'Sony', TRUE),
    ('00000000-0000-0000-0002-000000000902'::UUID, '00000000-0000-0000-0001-000000000010'::UUID, 'Xperia 5 V', 'Sony', TRUE),
    ('00000000-0000-0000-0002-000000000903'::UUID, '00000000-0000-0000-0001-000000000010'::UUID, 'Xperia 10 V', 'Sony', TRUE),
    ('00000000-0000-0000-0002-000000000904'::UUID, '00000000-0000-0000-0001-000000000010'::UUID, 'Xperia 1 IV', 'Sony', TRUE),
    ('00000000-0000-0000-0002-000000000905'::UUID, '00000000-0000-0000-0001-000000000010'::UUID, 'Xperia 5 IV', 'Sony', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Motorola models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000001001'::UUID, '00000000-0000-0000-0001-000000000011'::UUID, 'Moto Edge 40 Pro', 'Motorola', TRUE),
    ('00000000-0000-0000-0002-000000001002'::UUID, '00000000-0000-0000-0001-000000000011'::UUID, 'Moto Edge 40', 'Motorola', TRUE),
    ('00000000-0000-0000-0002-000000001003'::UUID, '00000000-0000-0000-0001-000000000011'::UUID, 'Moto G84', 'Motorola', TRUE),
    ('00000000-0000-0000-0002-000000001004'::UUID, '00000000-0000-0000-0001-000000000011'::UUID, 'Moto G73', 'Motorola', TRUE),
    ('00000000-0000-0000-0002-000000001005'::UUID, '00000000-0000-0000-0001-000000000011'::UUID, 'Moto G54', 'Motorola', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Asus models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000001101'::UUID, '00000000-0000-0000-0001-000000000012'::UUID, 'ROG Phone 7', 'Asus', TRUE),
    ('00000000-0000-0000-0002-000000001102'::UUID, '00000000-0000-0000-0001-000000000012'::UUID, 'ROG Phone 6', 'Asus', TRUE),
    ('00000000-0000-0000-0002-000000001103'::UUID, '00000000-0000-0000-0001-000000000012'::UUID, 'ZenFone 10', 'Asus', TRUE),
    ('00000000-0000-0000-0002-000000001104'::UUID, '00000000-0000-0000-0001-000000000012'::UUID, 'ZenFone 9', 'Asus', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Google models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000001201'::UUID, '00000000-0000-0000-0001-000000000013'::UUID, 'Pixel 8 Pro', 'Google', TRUE),
    ('00000000-0000-0000-0002-000000001202'::UUID, '00000000-0000-0000-0001-000000000013'::UUID, 'Pixel 8', 'Google', TRUE),
    ('00000000-0000-0000-0002-000000001203'::UUID, '00000000-0000-0000-0001-000000000013'::UUID, 'Pixel 7 Pro', 'Google', TRUE),
    ('00000000-0000-0000-0002-000000001204'::UUID, '00000000-0000-0000-0001-000000000013'::UUID, 'Pixel 7', 'Google', TRUE),
    ('00000000-0000-0000-0002-000000001205'::UUID, '00000000-0000-0000-0001-000000000013'::UUID, 'Pixel 6 Pro', 'Google', TRUE),
    ('00000000-0000-0000-0002-000000001206'::UUID, '00000000-0000-0000-0001-000000000013'::UUID, 'Pixel 6', 'Google', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Honor models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000001301'::UUID, '00000000-0000-0000-0001-000000000014'::UUID, 'Magic 6 Pro', 'Honor', TRUE),
    ('00000000-0000-0000-0002-000000001302'::UUID, '00000000-0000-0000-0001-000000000014'::UUID, 'Magic 5 Pro', 'Honor', TRUE),
    ('00000000-0000-0000-0002-000000001303'::UUID, '00000000-0000-0000-0001-000000000014'::UUID, '90 Pro', 'Honor', TRUE),
    ('00000000-0000-0000-0002-000000001304'::UUID, '00000000-0000-0000-0001-000000000014'::UUID, '90', 'Honor', TRUE),
    ('00000000-0000-0000-0002-000000001305'::UUID, '00000000-0000-0000-0001-000000000014'::UUID, 'X9a', 'Honor', TRUE),
    ('00000000-0000-0000-0002-000000001306'::UUID, '00000000-0000-0000-0001-000000000014'::UUID, 'X8a', 'Honor', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Tecno models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000001401'::UUID, '00000000-0000-0000-0001-000000000015'::UUID, 'Camon 20 Pro', 'Tecno', TRUE),
    ('00000000-0000-0000-0002-000000001402'::UUID, '00000000-0000-0000-0001-000000000015'::UUID, 'Camon 20', 'Tecno', TRUE),
    ('00000000-0000-0000-0002-000000001403'::UUID, '00000000-0000-0000-0001-000000000015'::UUID, 'Spark 20 Pro', 'Tecno', TRUE),
    ('00000000-0000-0000-0002-000000001404'::UUID, '00000000-0000-0000-0001-000000000015'::UUID, 'Spark 20', 'Tecno', TRUE),
    ('00000000-0000-0000-0002-000000001405'::UUID, '00000000-0000-0000-0001-000000000015'::UUID, 'Pova 5', 'Tecno', TRUE),
    ('00000000-0000-0000-0002-000000001406'::UUID, '00000000-0000-0000-0001-000000000015'::UUID, 'Pova 4', 'Tecno', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Infinix models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000001501'::UUID, '00000000-0000-0000-0001-000000000016'::UUID, 'Note 30 Pro', 'Infinix', TRUE),
    ('00000000-0000-0000-0002-000000001502'::UUID, '00000000-0000-0000-0001-000000000016'::UUID, 'Note 30', 'Infinix', TRUE),
    ('00000000-0000-0000-0002-000000001503'::UUID, '00000000-0000-0000-0001-000000000016'::UUID, 'Hot 40 Pro', 'Infinix', TRUE),
    ('00000000-0000-0000-0002-000000001504'::UUID, '00000000-0000-0000-0001-000000000016'::UUID, 'Hot 40', 'Infinix', TRUE),
    ('00000000-0000-0000-0002-000000001505'::UUID, '00000000-0000-0000-0001-000000000016'::UUID, 'Zero 30', 'Infinix', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Insert popular Itel models
INSERT INTO device_models (id, brand_id, name, device_type, is_active) VALUES
    ('00000000-0000-0000-0002-000000001601'::UUID, '00000000-0000-0000-0001-000000000017'::UUID, 'S23+', 'Itel', TRUE),
    ('00000000-0000-0000-0002-000000001602'::UUID, '00000000-0000-0000-0001-000000000017'::UUID, 'S23', 'Itel', TRUE),
    ('00000000-0000-0000-0002-000000001603'::UUID, '00000000-0000-0000-0001-000000000017'::UUID, 'A70', 'Itel', TRUE),
    ('00000000-0000-0000-0002-000000001604'::UUID, '00000000-0000-0000-0001-000000000017'::UUID, 'A60', 'Itel', TRUE),
    ('00000000-0000-0000-0002-000000001605'::UUID, '00000000-0000-0000-0001-000000000017'::UUID, 'P55', 'Itel', TRUE)
ON CONFLICT (brand_id, name) DO NOTHING;

-- Update devices table to use brand_id and model_id instead of brand and model strings
-- Note: This migration adds new columns, old columns will be kept for backward compatibility
-- You can create a separate migration to migrate data and drop old columns later

-- Make brand and model nullable to support both old and new way
ALTER TABLE devices ALTER COLUMN brand DROP NOT NULL;
ALTER TABLE devices ALTER COLUMN model DROP NOT NULL;

ALTER TABLE devices ADD COLUMN IF NOT EXISTS brand_id UUID;
ALTER TABLE devices ADD COLUMN IF NOT EXISTS model_id UUID;

CREATE INDEX idx_devices_brand_id ON devices(brand_id);
CREATE INDEX idx_devices_model_id ON devices(model_id);

-- Add foreign keys (only if they don't exist)
DO $$
BEGIN
    IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'fk_devices_brand') THEN
        ALTER TABLE devices 
            ADD CONSTRAINT fk_devices_brand FOREIGN KEY (brand_id) REFERENCES brands(id) ON DELETE RESTRICT;
    END IF;
    
    IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'fk_devices_model') THEN
        ALTER TABLE devices 
            ADD CONSTRAINT fk_devices_model FOREIGN KEY (model_id) REFERENCES device_models(id) ON DELETE RESTRICT;
    END IF;
END $$;

-- Create trigger function for updated_at (if not exists)
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Add triggers for brands and device_models
DROP TRIGGER IF EXISTS update_brands_updated_at ON brands;
CREATE TRIGGER update_brands_updated_at
    BEFORE UPDATE ON brands
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

DROP TRIGGER IF EXISTS update_device_models_updated_at ON device_models;
CREATE TRIGGER update_device_models_updated_at
    BEFORE UPDATE ON device_models
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

